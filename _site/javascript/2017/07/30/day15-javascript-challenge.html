<!DOCTYPE html>
<html>

  <head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  <!-- Favicon -->
  <link rel="icon" href="/favicon.png">
  <link rel="image_src" href="/images/personal_life.png">

  <!-- Meta information -->
  <title>Day 15: JavaScript Challenge</title>
  <meta name="description"
        content="LocalStorage and event delegation are concepts I am familiar with. However,I am very excited doing this challenge!Have you ever imagined adding event listene...">
  <link rel="canonical"
        href="https://miayam.github.io/javascript/2017/07/30/day15-javascript-challenge" />

  <!-- hack.css -->
  <link rel="stylesheet" href="https://npmcdn.com/hack/dist/hack.css" />
  
    <link rel="stylesheet" href="https://npmcdn.com/hack/dist/standard.css" />
  

  <!-- Prism.js -->
  <link rel="stylesheet" href="https://npmcdn.com/prismjs@1.5.1/themes/prism.css">

  <!-- Custom style -->
  <link rel="stylesheet" href="/css/main.css" />

  <!-- Feed -->
  <link rel="alternate" type="application/rss+xml" title="miayam.github.io"
        href="/feed.xml" />

  <!-- 'jekyll-seo' plugin -->
  <!-- Begin Jekyll SEO tag v2.0.0 -->
<title>Day 15: JavaScript Challenge - miayam.github.io</title>
<meta property="og:title" content="Day 15: JavaScript Challenge" />
<meta name="description" content="LocalStorage and event delegation are concepts I am familiar with. However,I am very excited doing this challenge!Have you ever imagined adding event listener to element that never existor will only exist in the future? That’s impossible, right? However, ourassumption sometime tells otherwise.Let’s say we want to delete item from to-do list (which is dynamicallycreated and destroyed) whenever we click ✖ button on it. If we attach eventlistener to ✖ button, you won’t get anything works correctly if the itemwas newly created because you cannot attach event listener to nonexistenceDOM element. Perhaps, it functions correctly for existing elements becauseit’s already on the page, but we’ve been wrong conceptually. That’s why weneed event delegation to fix that problem.Event delegation is not that fancy! It’s like attaching event listenerto parent element (as for ul, there must be a bunch of li inside it), sochild elements can function specifically without having to attach any eventlisteners to them.Pay attention to this snippet:  &lt;ul id=&quot;parent&quot;&gt;    &lt;li&gt;      &lt;a href=&#39;#&#39;&gt;Clik me and I don&#39;t care!&lt;/a&gt;      &lt;span&gt;Click me and I care!&lt;/span&gt;      &lt;input type=&quot;checkbox&quot;&gt;    &lt;/li&gt;  &lt;/ul&gt;  var parentElement = document.getElementById(&#39;parent&#39;);  // We only handle &#39;click&#39; event for &lt;span&gt; element and ignore the others.  function handleClickForSpan(event) {    if (event.target.matches(&#39;span&#39;)) {      event.target.style.color = &#39;red&#39;;    }  }  // We only handle &#39;click&#39; event for &lt;input type=&quot;checkbox&quot;&gt; and ignore the  // others.  function handleClickForCheckBox(event) {    // Hide parent element (`li`) if we check the check box.    if (event.target.matches(&#39;input&#39;)) {      event.target.parentNode.style.display = &quot;none&quot;;    }  }  parentElement.addEventListener(&#39;click&#39;, handleClickForSpan);  parentElement.addEventListener(&#39;click&#39;, handleClickForCheckBox);Perhaps, my wording is not as cute as ちえさ せれな. I will let David Walshexplain it if you find my explanation confusing. Here’s hisblog.I finish the challenge this way. Have a look atthe demo. I am off now!I promise, I will explain this snippet incrementally but thoroughly.HTML  &lt;div class=&quot;wrapper&quot;&gt;    &lt;h2&gt;LOCAL TAPAS&lt;/h2&gt;    &lt;p&gt;&lt;/p&gt;    &lt;ul class=&quot;item-list&quot;&gt;      &lt;li&gt;Loading Tapas...&lt;/li&gt;    &lt;/ul&gt;    &lt;form class=&quot;form&quot;&gt;      &lt;input type=&quot;text&quot; name=&quot;item&quot; placeholder=&quot;Item Name&quot; required&gt;      &lt;input type=&quot;submit&quot; value=&quot;+ Add Item&quot;&gt;    &lt;/form&gt;  &lt;/div&gt;JavaScript(function (window, undefined) {  var form = document.querySelector(&#39;.form&#39;);  var itemList = document.querySelector(&#39;.item-list&#39;);  var items = JSON.parse(localStorage.getItem(&#39;items&#39;)) || [];  // Parameters:  //    item: new item to be added to existing list of items  //          in `localStorage`. If it&#39;s `undefined`, then  //          ignore it.  function setState(item) {    // Append new item if there exist.    if (item) {      this.push(item);    }    // Turn array of items into a string and store it to    // `localStorage`. It&#39;s accessible across browser sessions.    // For more about it, visit https://mzl.la/2vWS47O    localStorage.setItem(&#39;items&#39;, JSON.stringify(this));  }  // Update content of list by mapping `items` variable  // which will be accessed via `this` keyword implicitly  // using `Function.prototype.call` method.  function updateList() {    itemList.innerHTML = this.map(function (item, index) {      var isChecked = item.done ? &#39;checked&#39; : &#39;&#39;;      return `        &lt;li&gt;          &lt;input type=&quot;checkbox&quot; data-index=${index} id=&quot;item${index}&quot;           ${isChecked}&gt;          &lt;label for=&quot;item${index}&quot;&gt;${item.text}&lt;label&gt;          &lt;span class=&quot;delete-item&quot; data-index=${index}&gt;✖&lt;/span&gt;        &lt;/li&gt;      `;    }).join(&#39;&#39;);  }  // Hide list if ✖ button clicked. Firstly,  // delete corresponding `item` that&#39;s tied up  // with DOM element. Update list of items  // by calling &quot;updateList.call(items);&quot;  // and store updated `items` variable to  // `localStorage` by calling &quot;setState.call(items);&quot;  function deleteItem(event) {    var index, element;    if (event.target.matches(&#39;span&#39;)) {      element = event.target;      index = element.dataset.index;      element.style.display = &quot;none&quot;;      items.splice(index, 1);      setState.call(items);      updateList.call(items);    } else {      return;    }  }  // In this case, if we check the checbox,  // we change the UI (from &#39;⬜️&#39; to &#39;🌮&#39;) and  // update the item&#39;s state. We store it to  // `localStorage` and list of items  // (DOM elements) updated as-is.  function toggleItemStatus(event) {    var index, element;    if (event.target.matches(&#39;input&#39;)) {      element = event.target;      index = element.dataset.index;      items[index].done = !items[index].done;      setState.call(items);      updateList.call(items);    } else {      return;    }  }    // Add new item, get the text from input field,  // and store it to existing list of items (array).  // Lastly, we update the DOM elements and set `items`  // variable to `localStorage`.  function addItem(event) {    var newItem = this.querySelector(&#39;input[name=&quot;item&quot;]&#39;);    var newItemAttributes = {      text: newItem.value,      done: false    };    setState.call(items, newItemAttributes);    updateList.call(items);    event.preventDefault();    this.reset();  }  function init() {    form.addEventListener(&#39;submit&#39;, addItem);    itemList.addEventListener(&#39;click&#39;, toggleItemStatus);    itemList.addEventListener(&#39;click&#39;, deleteItem);    updateList.call(items);  }  init();})(window);Alright then, that’s it for today. I long for ちえさ せれな’s cute ponytail.I cannot wait any longer!" />
<meta property="og:description" content="LocalStorage and event delegation are concepts I am familiar with. However,I am very excited doing this challenge!Have you ever imagined adding event listener to element that never existor will only exist in the future? That’s impossible, right? However, ourassumption sometime tells otherwise.Let’s say we want to delete item from to-do list (which is dynamicallycreated and destroyed) whenever we click ✖ button on it. If we attach eventlistener to ✖ button, you won’t get anything works correctly if the itemwas newly created because you cannot attach event listener to nonexistenceDOM element. Perhaps, it functions correctly for existing elements becauseit’s already on the page, but we’ve been wrong conceptually. That’s why weneed event delegation to fix that problem.Event delegation is not that fancy! It’s like attaching event listenerto parent element (as for ul, there must be a bunch of li inside it), sochild elements can function specifically without having to attach any eventlisteners to them.Pay attention to this snippet:  &lt;ul id=&quot;parent&quot;&gt;    &lt;li&gt;      &lt;a href=&#39;#&#39;&gt;Clik me and I don&#39;t care!&lt;/a&gt;      &lt;span&gt;Click me and I care!&lt;/span&gt;      &lt;input type=&quot;checkbox&quot;&gt;    &lt;/li&gt;  &lt;/ul&gt;  var parentElement = document.getElementById(&#39;parent&#39;);  // We only handle &#39;click&#39; event for &lt;span&gt; element and ignore the others.  function handleClickForSpan(event) {    if (event.target.matches(&#39;span&#39;)) {      event.target.style.color = &#39;red&#39;;    }  }  // We only handle &#39;click&#39; event for &lt;input type=&quot;checkbox&quot;&gt; and ignore the  // others.  function handleClickForCheckBox(event) {    // Hide parent element (`li`) if we check the check box.    if (event.target.matches(&#39;input&#39;)) {      event.target.parentNode.style.display = &quot;none&quot;;    }  }  parentElement.addEventListener(&#39;click&#39;, handleClickForSpan);  parentElement.addEventListener(&#39;click&#39;, handleClickForCheckBox);Perhaps, my wording is not as cute as ちえさ せれな. I will let David Walshexplain it if you find my explanation confusing. Here’s hisblog.I finish the challenge this way. Have a look atthe demo. I am off now!I promise, I will explain this snippet incrementally but thoroughly.HTML  &lt;div class=&quot;wrapper&quot;&gt;    &lt;h2&gt;LOCAL TAPAS&lt;/h2&gt;    &lt;p&gt;&lt;/p&gt;    &lt;ul class=&quot;item-list&quot;&gt;      &lt;li&gt;Loading Tapas...&lt;/li&gt;    &lt;/ul&gt;    &lt;form class=&quot;form&quot;&gt;      &lt;input type=&quot;text&quot; name=&quot;item&quot; placeholder=&quot;Item Name&quot; required&gt;      &lt;input type=&quot;submit&quot; value=&quot;+ Add Item&quot;&gt;    &lt;/form&gt;  &lt;/div&gt;JavaScript(function (window, undefined) {  var form = document.querySelector(&#39;.form&#39;);  var itemList = document.querySelector(&#39;.item-list&#39;);  var items = JSON.parse(localStorage.getItem(&#39;items&#39;)) || [];  // Parameters:  //    item: new item to be added to existing list of items  //          in `localStorage`. If it&#39;s `undefined`, then  //          ignore it.  function setState(item) {    // Append new item if there exist.    if (item) {      this.push(item);    }    // Turn array of items into a string and store it to    // `localStorage`. It&#39;s accessible across browser sessions.    // For more about it, visit https://mzl.la/2vWS47O    localStorage.setItem(&#39;items&#39;, JSON.stringify(this));  }  // Update content of list by mapping `items` variable  // which will be accessed via `this` keyword implicitly  // using `Function.prototype.call` method.  function updateList() {    itemList.innerHTML = this.map(function (item, index) {      var isChecked = item.done ? &#39;checked&#39; : &#39;&#39;;      return `        &lt;li&gt;          &lt;input type=&quot;checkbox&quot; data-index=${index} id=&quot;item${index}&quot;           ${isChecked}&gt;          &lt;label for=&quot;item${index}&quot;&gt;${item.text}&lt;label&gt;          &lt;span class=&quot;delete-item&quot; data-index=${index}&gt;✖&lt;/span&gt;        &lt;/li&gt;      `;    }).join(&#39;&#39;);  }  // Hide list if ✖ button clicked. Firstly,  // delete corresponding `item` that&#39;s tied up  // with DOM element. Update list of items  // by calling &quot;updateList.call(items);&quot;  // and store updated `items` variable to  // `localStorage` by calling &quot;setState.call(items);&quot;  function deleteItem(event) {    var index, element;    if (event.target.matches(&#39;span&#39;)) {      element = event.target;      index = element.dataset.index;      element.style.display = &quot;none&quot;;      items.splice(index, 1);      setState.call(items);      updateList.call(items);    } else {      return;    }  }  // In this case, if we check the checbox,  // we change the UI (from &#39;⬜️&#39; to &#39;🌮&#39;) and  // update the item&#39;s state. We store it to  // `localStorage` and list of items  // (DOM elements) updated as-is.  function toggleItemStatus(event) {    var index, element;    if (event.target.matches(&#39;input&#39;)) {      element = event.target;      index = element.dataset.index;      items[index].done = !items[index].done;      setState.call(items);      updateList.call(items);    } else {      return;    }  }    // Add new item, get the text from input field,  // and store it to existing list of items (array).  // Lastly, we update the DOM elements and set `items`  // variable to `localStorage`.  function addItem(event) {    var newItem = this.querySelector(&#39;input[name=&quot;item&quot;]&#39;);    var newItemAttributes = {      text: newItem.value,      done: false    };    setState.call(items, newItemAttributes);    updateList.call(items);    event.preventDefault();    this.reset();  }  function init() {    form.addEventListener(&#39;submit&#39;, addItem);    itemList.addEventListener(&#39;click&#39;, toggleItemStatus);    itemList.addEventListener(&#39;click&#39;, deleteItem);    updateList.call(items);  }  init();})(window);Alright then, that’s it for today. I long for ちえさ せれな’s cute ponytail.I cannot wait any longer!" />
<link rel="canonical" href="https://miayam.github.io/javascript/2017/07/30/day15-javascript-challenge" />
<meta property="og:url" content="https://miayam.github.io/javascript/2017/07/30/day15-javascript-challenge" />
<meta property="og:site_name" content="miayam.github.io" />
<meta property="og:type" content="article" />
<meta property="article:published_time" content="2017-07-30T00:00:00+07:00" />
<script type="application/ld+json">
  {
    "@context": "http://schema.org",
    "@type": "BlogPosting",
    "headline": "Day 15: JavaScript Challenge",
    "datePublished": "2017-07-30T00:00:00+07:00",
    "description": "LocalStorage and event delegation are concepts I am familiar with. However,I am very excited doing this challenge!Have you ever imagined adding event listener to element that never existor will only exist in the future? That’s impossible, right? However, ourassumption sometime tells otherwise.Let’s say we want to delete item from to-do list (which is dynamicallycreated and destroyed) whenever we click ✖ button on it. If we attach eventlistener to ✖ button, you won’t get anything works correctly if the itemwas newly created because you cannot attach event listener to nonexistenceDOM element. Perhaps, it functions correctly for existing elements becauseit’s already on the page, but we’ve been wrong conceptually. That’s why weneed event delegation to fix that problem.Event delegation is not that fancy! It’s like attaching event listenerto parent element (as for ul, there must be a bunch of li inside it), sochild elements can function specifically without having to attach any eventlisteners to them.Pay attention to this snippet:  &lt;ul id=&quot;parent&quot;&gt;    &lt;li&gt;      &lt;a href=&#39;#&#39;&gt;Clik me and I don&#39;t care!&lt;/a&gt;      &lt;span&gt;Click me and I care!&lt;/span&gt;      &lt;input type=&quot;checkbox&quot;&gt;    &lt;/li&gt;  &lt;/ul&gt;  var parentElement = document.getElementById(&#39;parent&#39;);  // We only handle &#39;click&#39; event for &lt;span&gt; element and ignore the others.  function handleClickForSpan(event) {    if (event.target.matches(&#39;span&#39;)) {      event.target.style.color = &#39;red&#39;;    }  }  // We only handle &#39;click&#39; event for &lt;input type=&quot;checkbox&quot;&gt; and ignore the  // others.  function handleClickForCheckBox(event) {    // Hide parent element (`li`) if we check the check box.    if (event.target.matches(&#39;input&#39;)) {      event.target.parentNode.style.display = &quot;none&quot;;    }  }  parentElement.addEventListener(&#39;click&#39;, handleClickForSpan);  parentElement.addEventListener(&#39;click&#39;, handleClickForCheckBox);Perhaps, my wording is not as cute as ちえさ せれな. I will let David Walshexplain it if you find my explanation confusing. Here’s hisblog.I finish the challenge this way. Have a look atthe demo. I am off now!I promise, I will explain this snippet incrementally but thoroughly.HTML  &lt;div class=&quot;wrapper&quot;&gt;    &lt;h2&gt;LOCAL TAPAS&lt;/h2&gt;    &lt;p&gt;&lt;/p&gt;    &lt;ul class=&quot;item-list&quot;&gt;      &lt;li&gt;Loading Tapas...&lt;/li&gt;    &lt;/ul&gt;    &lt;form class=&quot;form&quot;&gt;      &lt;input type=&quot;text&quot; name=&quot;item&quot; placeholder=&quot;Item Name&quot; required&gt;      &lt;input type=&quot;submit&quot; value=&quot;+ Add Item&quot;&gt;    &lt;/form&gt;  &lt;/div&gt;JavaScript(function (window, undefined) {  var form = document.querySelector(&#39;.form&#39;);  var itemList = document.querySelector(&#39;.item-list&#39;);  var items = JSON.parse(localStorage.getItem(&#39;items&#39;)) || [];  // Parameters:  //    item: new item to be added to existing list of items  //          in `localStorage`. If it&#39;s `undefined`, then  //          ignore it.  function setState(item) {    // Append new item if there exist.    if (item) {      this.push(item);    }    // Turn array of items into a string and store it to    // `localStorage`. It&#39;s accessible across browser sessions.    // For more about it, visit https://mzl.la/2vWS47O    localStorage.setItem(&#39;items&#39;, JSON.stringify(this));  }  // Update content of list by mapping `items` variable  // which will be accessed via `this` keyword implicitly  // using `Function.prototype.call` method.  function updateList() {    itemList.innerHTML = this.map(function (item, index) {      var isChecked = item.done ? &#39;checked&#39; : &#39;&#39;;      return `        &lt;li&gt;          &lt;input type=&quot;checkbox&quot; data-index=${index} id=&quot;item${index}&quot;           ${isChecked}&gt;          &lt;label for=&quot;item${index}&quot;&gt;${item.text}&lt;label&gt;          &lt;span class=&quot;delete-item&quot; data-index=${index}&gt;✖&lt;/span&gt;        &lt;/li&gt;      `;    }).join(&#39;&#39;);  }  // Hide list if ✖ button clicked. Firstly,  // delete corresponding `item` that&#39;s tied up  // with DOM element. Update list of items  // by calling &quot;updateList.call(items);&quot;  // and store updated `items` variable to  // `localStorage` by calling &quot;setState.call(items);&quot;  function deleteItem(event) {    var index, element;    if (event.target.matches(&#39;span&#39;)) {      element = event.target;      index = element.dataset.index;      element.style.display = &quot;none&quot;;      items.splice(index, 1);      setState.call(items);      updateList.call(items);    } else {      return;    }  }  // In this case, if we check the checbox,  // we change the UI (from &#39;⬜️&#39; to &#39;🌮&#39;) and  // update the item&#39;s state. We store it to  // `localStorage` and list of items  // (DOM elements) updated as-is.  function toggleItemStatus(event) {    var index, element;    if (event.target.matches(&#39;input&#39;)) {      element = event.target;      index = element.dataset.index;      items[index].done = !items[index].done;      setState.call(items);      updateList.call(items);    } else {      return;    }  }    // Add new item, get the text from input field,  // and store it to existing list of items (array).  // Lastly, we update the DOM elements and set `items`  // variable to `localStorage`.  function addItem(event) {    var newItem = this.querySelector(&#39;input[name=&quot;item&quot;]&#39;);    var newItemAttributes = {      text: newItem.value,      done: false    };    setState.call(items, newItemAttributes);    updateList.call(items);    event.preventDefault();    this.reset();  }  function init() {    form.addEventListener(&#39;submit&#39;, addItem);    itemList.addEventListener(&#39;click&#39;, toggleItemStatus);    itemList.addEventListener(&#39;click&#39;, deleteItem);    updateList.call(items);  }  init();})(window);Alright then, that’s it for today. I long for ちえさ せれな’s cute ponytail.I cannot wait any longer!",
    "url": "https://miayam.github.io/javascript/2017/07/30/day15-javascript-challenge"
  }
</script>
<!-- End Jekyll SEO tag -->
</head>



  
    <body class="standard">
  

    <div class="container">
      <div class="grid">
        <aside class="cell -3of12" role="navigation">
          <div class="logo">
            <a href="/" class="logo_link">
              <img src="/images/personal_life.png" style="height: 165px" title="Back to the home page...">
            </a>
            <span class="bullshit">Delicious Meal for Thought</span>
          </div>
          <div class="t-hackcss-navigation">
  <h2 class="t-hackcss-navigation-heading">Main Menu</h2>

  <nav class="menu" role="menubar">
    
    
      <a class="menu-item "
        role="menuitem" href="/" title="">
        Home <div class="pull-right">»</div>
      </a>
    
      <a class="menu-item "
        role="menuitem" href="/about" title="">
        About <div class="pull-right">»</div>
      </a>
    
      <a class="menu-item "
        role="menuitem" href="/archive" title="">
        Archive <div class="pull-right">»</div>
      </a>
    
      <a class="menu-item "
        role="menuitem" href="/assets/file/Resume_Muhammad_Deni_Ramadhan.pdf" title="">
        Resume <div class="pull-right">»</div>
      </a>
    
      <a class="menu-item "
        role="menuitem" href="/search" title="">
        Search <div class="pull-right">»</div>
      </a>
    
  </nav>
</div>

        </aside>

        <main class="cell -9of12">
          <article class="post" itemscope itemtype="http://schema.org/BlogPosting">

  <header class="post-header">
    <h1 class="post-title" itemprop="name headline">Day 15: JavaScript Challenge</h1>
    <p class="post-meta">
      <time datetime="2017-07-30T00:00:00+07:00"
            itemprop="datePublished"
            class="media-heading">
        30 July 2017
      </time>

      <span itemprop="author" itemscope itemtype="http://schema.org/Person">
        <span itemprop="name">written by <a href="https://github.com/miayam">Muhammad D. Ramadhan</a></span>
      </span>
    </p>
  </header>

  <div class="post-content" itemprop="articleBody">
    <p><code class="highlighter-rouge">LocalStorage</code> and event delegation are concepts I am familiar with. However,
I am very excited doing this challenge!</p>

<p>Have you ever imagined adding event listener to element that never exist
or will only exist in the future? That’s impossible, right? However, our
assumption sometime tells otherwise.</p>

<p>Let’s say we want to delete item from to-do list (which is dynamically
created and destroyed) whenever we click ✖ button on it. If we attach event
listener to ✖ button, you won’t get anything works correctly if the item
was newly created because you cannot attach event listener to nonexistence
DOM element. Perhaps, it functions correctly for existing elements because
it’s already on the page, but we’ve been wrong conceptually. That’s why we
need event delegation to fix that problem.</p>

<p>Event delegation is not that fancy! It’s like attaching event listener
to parent element (as for <code class="highlighter-rouge">ul</code>, there must be a bunch of <code class="highlighter-rouge">li</code> inside it), so
child elements can function specifically without having to attach any event
listeners to them.</p>

<p>Pay attention to this snippet:</p>

<figure class="highlight"><pre><code class="language-html" data-lang="html">  <span class="nt">&lt;ul</span> <span class="na">id=</span><span class="s">"parent"</span><span class="nt">&gt;</span>
    <span class="nt">&lt;li&gt;</span>
      <span class="nt">&lt;a</span> <span class="na">href=</span><span class="s">'#'</span><span class="nt">&gt;</span>Clik me and I don't care!<span class="nt">&lt;/a&gt;</span>
      <span class="nt">&lt;span&gt;</span>Click me and I care!<span class="nt">&lt;/span&gt;</span>
      <span class="nt">&lt;input</span> <span class="na">type=</span><span class="s">"checkbox"</span><span class="nt">&gt;</span>
    <span class="nt">&lt;/li&gt;</span>
  <span class="nt">&lt;/ul&gt;</span></code></pre></figure>

<figure class="highlight"><pre><code class="language-js" data-lang="js">  <span class="kd">var</span> <span class="nx">parentElement</span> <span class="o">=</span> <span class="nb">document</span><span class="p">.</span><span class="nx">getElementById</span><span class="p">(</span><span class="s1">'parent'</span><span class="p">);</span>

  <span class="c1">// We only handle 'click' event for &lt;span&gt; element and ignore the others.</span>
  <span class="kd">function</span> <span class="nx">handleClickForSpan</span><span class="p">(</span><span class="nx">event</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">if</span> <span class="p">(</span><span class="nx">event</span><span class="p">.</span><span class="nx">target</span><span class="p">.</span><span class="nx">matches</span><span class="p">(</span><span class="s1">'span'</span><span class="p">))</span> <span class="p">{</span>
      <span class="nx">event</span><span class="p">.</span><span class="nx">target</span><span class="p">.</span><span class="nx">style</span><span class="p">.</span><span class="nx">color</span> <span class="o">=</span> <span class="s1">'red'</span><span class="p">;</span>
    <span class="p">}</span>
  <span class="p">}</span>

  <span class="c1">// We only handle 'click' event for &lt;input type="checkbox"&gt; and ignore the</span>
  <span class="c1">// others.</span>
  <span class="kd">function</span> <span class="nx">handleClickForCheckBox</span><span class="p">(</span><span class="nx">event</span><span class="p">)</span> <span class="p">{</span>
    <span class="c1">// Hide parent element (`li`) if we check the check box.</span>
    <span class="k">if</span> <span class="p">(</span><span class="nx">event</span><span class="p">.</span><span class="nx">target</span><span class="p">.</span><span class="nx">matches</span><span class="p">(</span><span class="s1">'input'</span><span class="p">))</span> <span class="p">{</span>
      <span class="nx">event</span><span class="p">.</span><span class="nx">target</span><span class="p">.</span><span class="nx">parentNode</span><span class="p">.</span><span class="nx">style</span><span class="p">.</span><span class="nx">display</span> <span class="o">=</span> <span class="s2">"none"</span><span class="p">;</span>
    <span class="p">}</span>
  <span class="p">}</span>

  <span class="nx">parentElement</span><span class="p">.</span><span class="nx">addEventListener</span><span class="p">(</span><span class="s1">'click'</span><span class="p">,</span> <span class="nx">handleClickForSpan</span><span class="p">);</span>
  <span class="nx">parentElement</span><span class="p">.</span><span class="nx">addEventListener</span><span class="p">(</span><span class="s1">'click'</span><span class="p">,</span> <span class="nx">handleClickForCheckBox</span><span class="p">);</span></code></pre></figure>

<p>Perhaps, my wording is not as cute as ちえさ せれな. I will let David Walsh
explain it if you find my explanation confusing. Here’s his
<a href="https://davidwalsh.name/event-delegate" target="_blank">blog</a>.</p>

<p>I finish the challenge this way. Have a look at
the <a href="/demo_day15" target="_blank">demo</a>. I am off now!</p>

<p>I promise, I will explain this snippet incrementally but thoroughly.</p>

<h3 id="html">HTML</h3>

<figure class="highlight"><pre><code class="language-html" data-lang="html">  <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"wrapper"</span><span class="nt">&gt;</span>
    <span class="nt">&lt;h2&gt;</span>LOCAL TAPAS<span class="nt">&lt;/h2&gt;</span>
    <span class="nt">&lt;p&gt;&lt;/p&gt;</span>
    <span class="nt">&lt;ul</span> <span class="na">class=</span><span class="s">"item-list"</span><span class="nt">&gt;</span>
      <span class="nt">&lt;li&gt;</span>Loading Tapas...<span class="nt">&lt;/li&gt;</span>
    <span class="nt">&lt;/ul&gt;</span>
    <span class="nt">&lt;form</span> <span class="na">class=</span><span class="s">"form"</span><span class="nt">&gt;</span>
      <span class="nt">&lt;input</span> <span class="na">type=</span><span class="s">"text"</span> <span class="na">name=</span><span class="s">"item"</span> <span class="na">placeholder=</span><span class="s">"Item Name"</span> <span class="na">required</span><span class="nt">&gt;</span>
      <span class="nt">&lt;input</span> <span class="na">type=</span><span class="s">"submit"</span> <span class="na">value=</span><span class="s">"+ Add Item"</span><span class="nt">&gt;</span>
    <span class="nt">&lt;/form&gt;</span>
  <span class="nt">&lt;/div&gt;</span></code></pre></figure>

<h3 id="javascript">JavaScript</h3>

<noscript><pre>(function (window, undefined) {
  var form = document.querySelector(&#39;.form&#39;);
  var itemList = document.querySelector(&#39;.item-list&#39;);
  var items = JSON.parse(localStorage.getItem(&#39;items&#39;)) || [];

  // Parameters:
  //    item: new item to be added to existing list of items
  //          in `localStorage`. If it&#39;s `undefined`, then
  //          ignore it.
  function setState(item) {
    // Append new item if there exist.
    if (item) {
      this.push(item);
    }

    // Turn array of items into a string and store it to
    // `localStorage`. It&#39;s accessible across browser sessions.
    // For more about it, visit https://mzl.la/2vWS47O
    localStorage.setItem(&#39;items&#39;, JSON.stringify(this));
  }

  // Update content of list by mapping `items` variable
  // which will be accessed via `this` keyword implicitly
  // using `Function.prototype.call` method.
  function updateList() {
    itemList.innerHTML = this.map(function (item, index) {
      var isChecked = item.done ? &#39;checked&#39; : &#39;&#39;;
      return `
        &lt;li&gt;
          &lt;input type=&quot;checkbox&quot; data-index=${index} id=&quot;item${index}&quot;
           ${isChecked}&gt;
          &lt;label for=&quot;item${index}&quot;&gt;${item.text}&lt;label&gt;
          &lt;span class=&quot;delete-item&quot; data-index=${index}&gt;✖&lt;/span&gt;
        &lt;/li&gt;
      `;
    }).join(&#39;&#39;);
  }

  // Hide list if ✖ button clicked. Firstly,
  // delete corresponding `item` that&#39;s tied up
  // with DOM element. Update list of items
  // by calling &quot;updateList.call(items);&quot;
  // and store updated `items` variable to
  // `localStorage` by calling &quot;setState.call(items);&quot;
  function deleteItem(event) {
    var index, element;

    if (event.target.matches(&#39;span&#39;)) {
      element = event.target;
      index = element.dataset.index;
      element.style.display = &quot;none&quot;;
      items.splice(index, 1);
      setState.call(items);
      updateList.call(items);
    } else {
      return;
    }
  }

  // In this case, if we check the checbox,
  // we change the UI (from &#39;⬜️&#39; to &#39;🌮&#39;) and
  // update the item&#39;s state. We store it to
  // `localStorage` and list of items
  // (DOM elements) updated as-is.
  function toggleItemStatus(event) {
    var index, element;

    if (event.target.matches(&#39;input&#39;)) {
      element = event.target;
      index = element.dataset.index;
      items[index].done = !items[index].done;
      setState.call(items);
      updateList.call(items);
    } else {
      return;
    }
  }
  
  // Add new item, get the text from input field,
  // and store it to existing list of items (array).
  // Lastly, we update the DOM elements and set `items`
  // variable to `localStorage`.
  function addItem(event) {
    var newItem = this.querySelector(&#39;input[name=&quot;item&quot;]&#39;);
    var newItemAttributes = {
      text: newItem.value,
      done: false
    };

    setState.call(items, newItemAttributes);
    updateList.call(items);
    event.preventDefault();
    this.reset();
  }

  function init() {
    form.addEventListener(&#39;submit&#39;, addItem);
    itemList.addEventListener(&#39;click&#39;, toggleItemStatus);
    itemList.addEventListener(&#39;click&#39;, deleteItem);
    updateList.call(items);
  }

  init();
})(window);
</pre></noscript>
<script src="https://gist.github.com/miayam/0f0a478f92b8b31f8e677442faf025b6.js"> </script>

<p>Alright then, that’s it for today. I long for ちえさ せれな’s cute ponytail.
I cannot wait any longer!</p>

  </div>

  <div class="blog-navigation">
    <hr>
    
      <a href="/personal-life/2017/07/30/bullying" class="blog-navigation__previous-link">&laquo; Perundungan (Bullying)</a>
    
    
      <a href="/javascript/2017/08/19/day16-javascript-challenge" class="blog-navigation__next-link"> Day 16: JavaScript Challenge &raquo;</a>
    
  </div>
</article>

<section>
  <div class="fb-comments" data-href="https://miayam.github.io/javascript/2017/07/30/day15-javascript-challenge" data-width="100%" data-numposts="10">
  </div>
</section>

        </main>
      </div>

    <footer class="t-hackcss-footer">
  <div class="cell -12of12">
    <div class="contact-list">
    </div>
  </div>
</footer>


    </div>

  </body>
  <div id="fb-root"></div>
  <script>
    (function(d, s, id) {
      var js, fjs = d.getElementsByTagName(s)[0];
      if (d.getElementById(id)) {
        d.getElementById('loading').style.display = "none";
        return;
      }
      js = d.createElement(s); js.id = id;
      js.src = "//connect.facebook.net/en_GB/sdk.js#xfbml=1&version=v2.9&appId=676883012507478";
      fjs.parentNode.insertBefore(js, fjs);
    }(document, 'script', 'facebook-jssdk'));
  </script>

  <script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.0/MathJax.js?config=TeX-AMS-MML_HTMLorMML" type="text/javascript"></script>
</html>
