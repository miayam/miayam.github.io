<!DOCTYPE html>
<html>

  <head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  <!-- Favicon -->
  <link rel="icon" href="/favicon.png">
  <link rel="image_src" href="/images/personal_life.png">

  <!-- Meta information -->
  <title>Day 19: JavaScript Challenge</title>
  <meta name="description"
        content="Taking a photo from webcam and painting it to canvas seemed magical before this challenge.Here’s the demo.The snippets below seems gibberish, but don’t worry...">
  <link rel="canonical"
        href="https://miayam.github.io/javascript/2017/08/20/day19-javascript-challenge" />

  <!-- hack.css -->
  <link rel="stylesheet" href="https://npmcdn.com/hack/dist/hack.css" />
  
    <link rel="stylesheet" href="https://npmcdn.com/hack/dist/standard.css" />
  

  <!-- Prism.js -->
  <link rel="stylesheet" href="https://npmcdn.com/prismjs@1.5.1/themes/prism.css">

  <!-- Custom style -->
  <link rel="stylesheet" href="/css/main.css" />

  <!-- Feed -->
  <link rel="alternate" type="application/rss+xml" title="miayam.github.io"
        href="/feed.xml" />

  <!-- 'jekyll-seo' plugin -->
  <!-- Begin Jekyll SEO tag v2.0.0 -->
<title>Day 19: JavaScript Challenge - miayam.github.io</title>
<meta property="og:title" content="Day 19: JavaScript Challenge" />
<meta name="description" content="Taking a photo from webcam and painting it to canvas seemed magical before this challenge.Here’s the demo.The snippets below seems gibberish, but don’t worry, there will be comments to explain how it works. I promise.Markup  &lt;body class=&quot;wrapper&quot;&gt;    &lt;div class=&quot;photobooth&quot;&gt;      &lt;div class=&quot;controls&quot;&gt;        &lt;button class=&quot;take-photo-js&quot;&gt;          &lt;span class=&quot;photo-icon&quot;&gt;&amp;#128247;&lt;/span&gt;        &lt;/button&gt;      &lt;/div&gt;      &lt;canvas class=&quot;photo&quot;&gt;&lt;/canvas&gt;      &lt;video class=&quot;player&quot;&gt;&lt;/video&gt;    &lt;/div&gt;    &lt;div class=&quot;strip&quot;&gt;&lt;/div&gt;    &lt;audio class=&quot;snap&quot; src=&quot;assets/sounds/snap.mp3&quot; hidden&gt;&lt;/audio&gt;    &lt;script src=&quot;assets/js/demo19.js&quot;&gt;&lt;/script&gt;  &lt;/body&gt;JavaScript(function (window, undefined) {  var video = document.querySelector(&#39;.player&#39;);  var canvas = document.querySelector(&#39;.photo&#39;);  var strip = document.querySelector(&#39;.strip&#39;);  var snap = document.querySelector(&#39;.snap&#39;);  var context = canvas.getContext(&#39;2d&#39;);  var takePhotoButton = document.querySelector(&#39;.take-photo-js&#39;);  var timeout;  function getVideo() {    navigator.mediaDevices.getUserMedia({      video: true, audio: false    }).then(function (localMediaStream) {      video.src = window.URL.createObjectURL(localMediaStream);      video.play();    }).catch(function (error) {      console.error(`You can&#39;t play the video: ${error}`);    });  }  function paintToCanvas() {    var width = video.videoWidth;    var height = video.videoHeight;    canvas.width = width;    canvas.height = height;        // This is `div` that wraps the canvas.    canvas.parentNode.width = width;    canvas.parentNode.height = height;        // It&#39;s for mirroring. The webcam doesn&#39;t mirror our reflection.    // If you raise your left hand, you will see your actual left hand    // raised on the canvas. That&#39;s not what usually people want for their    // taking picture&#39;s business. To fix that, we have to flip the canvas    // horizontally.    context.translate(width, 0);    context.scale(-1, 1);    window.clearInterval(timeout);        timeout = window.setInterval(function () {      context.drawImage(video, 0, 0, width, height);    }, 32);  }  function takePhoto() {    var data = canvas.toDataURL(&#39;image/jpeg&#39;);    var link = document.createElement(&#39;a&#39;);    var numbering = Math.floor(Math.random() * 1000000);    // Play the &quot;snap&quot; sound when we take a photo.    snap.currentTime = 0;    snap.play();    link.href = data;    link.setAttribute(&#39;download&#39;, `handsome-${numbering}.jpeg`);    link.innerHTML = `&lt;img src=&quot;${data}&quot; alt=&quot;photo&quot;/&gt;`;    strip.insertBefore(link, strip.firstChild);  }  function init() {    getVideo();        // When the video is ready to start playing (even if it&#39;s buffering),    // paint the snapshot taken from video to canvas. This event listener    // runs repeatedly as the video loads the stream from webcam which    // is always on until users disable it. For more about it,    // visit http://bit.ly/2g0D9G5    video.addEventListener(&#39;canplay&#39;, paintToCanvas);        takePhotoButton.addEventListener(&#39;click&#39;, takePhoto);  }  return {    init: init,    canvas: canvas,    video: video  };})(window).init();" />
<meta property="og:description" content="Taking a photo from webcam and painting it to canvas seemed magical before this challenge.Here’s the demo.The snippets below seems gibberish, but don’t worry, there will be comments to explain how it works. I promise.Markup  &lt;body class=&quot;wrapper&quot;&gt;    &lt;div class=&quot;photobooth&quot;&gt;      &lt;div class=&quot;controls&quot;&gt;        &lt;button class=&quot;take-photo-js&quot;&gt;          &lt;span class=&quot;photo-icon&quot;&gt;&amp;#128247;&lt;/span&gt;        &lt;/button&gt;      &lt;/div&gt;      &lt;canvas class=&quot;photo&quot;&gt;&lt;/canvas&gt;      &lt;video class=&quot;player&quot;&gt;&lt;/video&gt;    &lt;/div&gt;    &lt;div class=&quot;strip&quot;&gt;&lt;/div&gt;    &lt;audio class=&quot;snap&quot; src=&quot;assets/sounds/snap.mp3&quot; hidden&gt;&lt;/audio&gt;    &lt;script src=&quot;assets/js/demo19.js&quot;&gt;&lt;/script&gt;  &lt;/body&gt;JavaScript(function (window, undefined) {  var video = document.querySelector(&#39;.player&#39;);  var canvas = document.querySelector(&#39;.photo&#39;);  var strip = document.querySelector(&#39;.strip&#39;);  var snap = document.querySelector(&#39;.snap&#39;);  var context = canvas.getContext(&#39;2d&#39;);  var takePhotoButton = document.querySelector(&#39;.take-photo-js&#39;);  var timeout;  function getVideo() {    navigator.mediaDevices.getUserMedia({      video: true, audio: false    }).then(function (localMediaStream) {      video.src = window.URL.createObjectURL(localMediaStream);      video.play();    }).catch(function (error) {      console.error(`You can&#39;t play the video: ${error}`);    });  }  function paintToCanvas() {    var width = video.videoWidth;    var height = video.videoHeight;    canvas.width = width;    canvas.height = height;        // This is `div` that wraps the canvas.    canvas.parentNode.width = width;    canvas.parentNode.height = height;        // It&#39;s for mirroring. The webcam doesn&#39;t mirror our reflection.    // If you raise your left hand, you will see your actual left hand    // raised on the canvas. That&#39;s not what usually people want for their    // taking picture&#39;s business. To fix that, we have to flip the canvas    // horizontally.    context.translate(width, 0);    context.scale(-1, 1);    window.clearInterval(timeout);        timeout = window.setInterval(function () {      context.drawImage(video, 0, 0, width, height);    }, 32);  }  function takePhoto() {    var data = canvas.toDataURL(&#39;image/jpeg&#39;);    var link = document.createElement(&#39;a&#39;);    var numbering = Math.floor(Math.random() * 1000000);    // Play the &quot;snap&quot; sound when we take a photo.    snap.currentTime = 0;    snap.play();    link.href = data;    link.setAttribute(&#39;download&#39;, `handsome-${numbering}.jpeg`);    link.innerHTML = `&lt;img src=&quot;${data}&quot; alt=&quot;photo&quot;/&gt;`;    strip.insertBefore(link, strip.firstChild);  }  function init() {    getVideo();        // When the video is ready to start playing (even if it&#39;s buffering),    // paint the snapshot taken from video to canvas. This event listener    // runs repeatedly as the video loads the stream from webcam which    // is always on until users disable it. For more about it,    // visit http://bit.ly/2g0D9G5    video.addEventListener(&#39;canplay&#39;, paintToCanvas);        takePhotoButton.addEventListener(&#39;click&#39;, takePhoto);  }  return {    init: init,    canvas: canvas,    video: video  };})(window).init();" />
<link rel="canonical" href="https://miayam.github.io/javascript/2017/08/20/day19-javascript-challenge" />
<meta property="og:url" content="https://miayam.github.io/javascript/2017/08/20/day19-javascript-challenge" />
<meta property="og:site_name" content="miayam.github.io" />
<meta property="og:type" content="article" />
<meta property="article:published_time" content="2017-08-20T00:00:00+07:00" />
<script type="application/ld+json">
  {
    "@context": "http://schema.org",
    "@type": "BlogPosting",
    "headline": "Day 19: JavaScript Challenge",
    "datePublished": "2017-08-20T00:00:00+07:00",
    "description": "Taking a photo from webcam and painting it to canvas seemed magical before this challenge.Here’s the demo.The snippets below seems gibberish, but don’t worry, there will be comments to explain how it works. I promise.Markup  &lt;body class=&quot;wrapper&quot;&gt;    &lt;div class=&quot;photobooth&quot;&gt;      &lt;div class=&quot;controls&quot;&gt;        &lt;button class=&quot;take-photo-js&quot;&gt;          &lt;span class=&quot;photo-icon&quot;&gt;&amp;#128247;&lt;/span&gt;        &lt;/button&gt;      &lt;/div&gt;      &lt;canvas class=&quot;photo&quot;&gt;&lt;/canvas&gt;      &lt;video class=&quot;player&quot;&gt;&lt;/video&gt;    &lt;/div&gt;    &lt;div class=&quot;strip&quot;&gt;&lt;/div&gt;    &lt;audio class=&quot;snap&quot; src=&quot;assets/sounds/snap.mp3&quot; hidden&gt;&lt;/audio&gt;    &lt;script src=&quot;assets/js/demo19.js&quot;&gt;&lt;/script&gt;  &lt;/body&gt;JavaScript(function (window, undefined) {  var video = document.querySelector(&#39;.player&#39;);  var canvas = document.querySelector(&#39;.photo&#39;);  var strip = document.querySelector(&#39;.strip&#39;);  var snap = document.querySelector(&#39;.snap&#39;);  var context = canvas.getContext(&#39;2d&#39;);  var takePhotoButton = document.querySelector(&#39;.take-photo-js&#39;);  var timeout;  function getVideo() {    navigator.mediaDevices.getUserMedia({      video: true, audio: false    }).then(function (localMediaStream) {      video.src = window.URL.createObjectURL(localMediaStream);      video.play();    }).catch(function (error) {      console.error(`You can&#39;t play the video: ${error}`);    });  }  function paintToCanvas() {    var width = video.videoWidth;    var height = video.videoHeight;    canvas.width = width;    canvas.height = height;        // This is `div` that wraps the canvas.    canvas.parentNode.width = width;    canvas.parentNode.height = height;        // It&#39;s for mirroring. The webcam doesn&#39;t mirror our reflection.    // If you raise your left hand, you will see your actual left hand    // raised on the canvas. That&#39;s not what usually people want for their    // taking picture&#39;s business. To fix that, we have to flip the canvas    // horizontally.    context.translate(width, 0);    context.scale(-1, 1);    window.clearInterval(timeout);        timeout = window.setInterval(function () {      context.drawImage(video, 0, 0, width, height);    }, 32);  }  function takePhoto() {    var data = canvas.toDataURL(&#39;image/jpeg&#39;);    var link = document.createElement(&#39;a&#39;);    var numbering = Math.floor(Math.random() * 1000000);    // Play the &quot;snap&quot; sound when we take a photo.    snap.currentTime = 0;    snap.play();    link.href = data;    link.setAttribute(&#39;download&#39;, `handsome-${numbering}.jpeg`);    link.innerHTML = `&lt;img src=&quot;${data}&quot; alt=&quot;photo&quot;/&gt;`;    strip.insertBefore(link, strip.firstChild);  }  function init() {    getVideo();        // When the video is ready to start playing (even if it&#39;s buffering),    // paint the snapshot taken from video to canvas. This event listener    // runs repeatedly as the video loads the stream from webcam which    // is always on until users disable it. For more about it,    // visit http://bit.ly/2g0D9G5    video.addEventListener(&#39;canplay&#39;, paintToCanvas);        takePhotoButton.addEventListener(&#39;click&#39;, takePhoto);  }  return {    init: init,    canvas: canvas,    video: video  };})(window).init();",
    "url": "https://miayam.github.io/javascript/2017/08/20/day19-javascript-challenge"
  }
</script>
<!-- End Jekyll SEO tag -->
</head>



  
    <body class="standard">
  

    <div class="container">
      <div class="grid">
        <aside class="cell -3of12" role="navigation">
          <div class="logo">
            <a href="/" class="logo_link">
              <img src="/images/personal_life.png" style="height: 165px" title="Back to the home page...">
            </a>
            <span class="bullshit">Delicious Meal for Thought</span>
          </div>
          <div class="t-hackcss-navigation">
  <h2 class="t-hackcss-navigation-heading">Main Menu</h2>

  <nav class="menu" role="menubar">
    
    
      <a class="menu-item "
        role="menuitem" href="/" title="">
        Home <div class="pull-right">»</div>
      </a>
    
      <a class="menu-item "
        role="menuitem" href="/about" title="">
        About <div class="pull-right">»</div>
      </a>
    
      <a class="menu-item "
        role="menuitem" href="/archive" title="">
        Archive <div class="pull-right">»</div>
      </a>
    
      <a class="menu-item "
        role="menuitem" href="/assets/file/Resume_Muhammad_Deni_Ramadhan.pdf" title="">
        Resume <div class="pull-right">»</div>
      </a>
    
      <a class="menu-item "
        role="menuitem" href="/search" title="">
        Search <div class="pull-right">»</div>
      </a>
    
  </nav>
</div>

        </aside>

        <main class="cell -9of12">
          <article class="post" itemscope itemtype="http://schema.org/BlogPosting">

  <header class="post-header">
    <h1 class="post-title" itemprop="name headline">Day 19: JavaScript Challenge</h1>
    <p class="post-meta">
      <time datetime="2017-08-20T00:00:00+07:00"
            itemprop="datePublished"
            class="media-heading">
        20 August 2017
      </time>

      <span itemprop="author" itemscope itemtype="http://schema.org/Person">
        <span itemprop="name">written by <a href="https://github.com/miayam">Muhammad D. Ramadhan</a></span>
      </span>
    </p>
  </header>

  <div class="post-content" itemprop="articleBody">
    <p>Taking a photo from webcam and painting it to canvas seemed magical before this challenge.</p>

<p>Here’s the <a href="/demo_day19" target="_blank">demo</a>.</p>

<p>The snippets below seems gibberish, but don’t worry, there will be comments to explain how it works. I promise.</p>

<h3 id="markup">Markup</h3>

<figure class="highlight"><pre><code class="language-html" data-lang="html">  <span class="nt">&lt;body</span> <span class="na">class=</span><span class="s">"wrapper"</span><span class="nt">&gt;</span>
    <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"photobooth"</span><span class="nt">&gt;</span>
      <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"controls"</span><span class="nt">&gt;</span>
        <span class="nt">&lt;button</span> <span class="na">class=</span><span class="s">"take-photo-js"</span><span class="nt">&gt;</span>
          <span class="nt">&lt;span</span> <span class="na">class=</span><span class="s">"photo-icon"</span><span class="nt">&gt;</span><span class="ni">&amp;#128247;</span><span class="nt">&lt;/span&gt;</span>
        <span class="nt">&lt;/button&gt;</span>
      <span class="nt">&lt;/div&gt;</span>

      <span class="nt">&lt;canvas</span> <span class="na">class=</span><span class="s">"photo"</span><span class="nt">&gt;&lt;/canvas&gt;</span>
      <span class="nt">&lt;video</span> <span class="na">class=</span><span class="s">"player"</span><span class="nt">&gt;&lt;/video&gt;</span>
    <span class="nt">&lt;/div&gt;</span>

    <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"strip"</span><span class="nt">&gt;&lt;/div&gt;</span>
    <span class="nt">&lt;audio</span> <span class="na">class=</span><span class="s">"snap"</span> <span class="na">src=</span><span class="s">"assets/sounds/snap.mp3"</span> <span class="na">hidden</span><span class="nt">&gt;&lt;/audio&gt;</span>
    <span class="nt">&lt;script </span><span class="na">src=</span><span class="s">"assets/js/demo19.js"</span><span class="nt">&gt;&lt;/script&gt;</span>
  <span class="nt">&lt;/body&gt;</span></code></pre></figure>

<h3 id="javascript">JavaScript</h3>

<noscript><pre>(function (window, undefined) {
  var video = document.querySelector(&#39;.player&#39;);
  var canvas = document.querySelector(&#39;.photo&#39;);
  var strip = document.querySelector(&#39;.strip&#39;);
  var snap = document.querySelector(&#39;.snap&#39;);
  var context = canvas.getContext(&#39;2d&#39;);
  var takePhotoButton = document.querySelector(&#39;.take-photo-js&#39;);
  var timeout;

  function getVideo() {
    navigator.mediaDevices.getUserMedia({
      video: true, audio: false
    }).then(function (localMediaStream) {
      video.src = window.URL.createObjectURL(localMediaStream);
      video.play();
    }).catch(function (error) {
      console.error(`You can&#39;t play the video: ${error}`);
    });
  }

  function paintToCanvas() {
    var width = video.videoWidth;
    var height = video.videoHeight;

    canvas.width = width;
    canvas.height = height;
    
    // This is `div` that wraps the canvas.
    canvas.parentNode.width = width;
    canvas.parentNode.height = height;
    
    // It&#39;s for mirroring. The webcam doesn&#39;t mirror our reflection.
    // If you raise your left hand, you will see your actual left hand
    // raised on the canvas. That&#39;s not what usually people want for their
    // taking picture&#39;s business. To fix that, we have to flip the canvas
    // horizontally.
    context.translate(width, 0);
    context.scale(-1, 1);

    window.clearInterval(timeout);
    
    timeout = window.setInterval(function () {
      context.drawImage(video, 0, 0, width, height);
    }, 32);
  }

  function takePhoto() {
    var data = canvas.toDataURL(&#39;image/jpeg&#39;);
    var link = document.createElement(&#39;a&#39;);
    var numbering = Math.floor(Math.random() * 1000000);


    // Play the &quot;snap&quot; sound when we take a photo.
    snap.currentTime = 0;
    snap.play();

    link.href = data;
    link.setAttribute(&#39;download&#39;, `handsome-${numbering}.jpeg`);

    link.innerHTML = `&lt;img src=&quot;${data}&quot; alt=&quot;photo&quot;/&gt;`;
    strip.insertBefore(link, strip.firstChild);
  }

  function init() {
    getVideo();
    
    // When the video is ready to start playing (even if it&#39;s buffering),
    // paint the snapshot taken from video to canvas. This event listener
    // runs repeatedly as the video loads the stream from webcam which
    // is always on until users disable it. For more about it,
    // visit http://bit.ly/2g0D9G5
    video.addEventListener(&#39;canplay&#39;, paintToCanvas);
    
    takePhotoButton.addEventListener(&#39;click&#39;, takePhoto);
  }

  return {
    init: init,
    canvas: canvas,
    video: video
  };
})(window).init();</pre></noscript>
<script src="https://gist.github.com/miayam/9120349e9dc6b4d8250864a6b8526137.js"> </script>


  </div>

  <div class="blog-navigation">
    <hr>
    
      <a href="/javascript/2017/08/20/day18-javascript-challenge" class="blog-navigation__previous-link">&laquo; Day 18: JavaScript Challenge</a>
    
    
      <a href="/javascript/2017/08/22/day20-javascript-challenge" class="blog-navigation__next-link"> Day 20: JavaScript Challenge &raquo;</a>
    
  </div>
</article>

<section>
  <div class="fb-comments" data-href="https://miayam.github.io/javascript/2017/08/20/day19-javascript-challenge" data-width="100%" data-numposts="10">
  </div>
</section>

        </main>
      </div>

    <footer class="t-hackcss-footer">
  <div class="cell -12of12">
    <div class="contact-list">
    </div>
  </div>
</footer>


    </div>

  </body>
  <div id="fb-root"></div>
  <script>
    (function(d, s, id) {
      var js, fjs = d.getElementsByTagName(s)[0];
      if (d.getElementById(id)) {
        d.getElementById('loading').style.display = "none";
        return;
      }
      js = d.createElement(s); js.id = id;
      js.src = "//connect.facebook.net/en_GB/sdk.js#xfbml=1&version=v2.9&appId=676883012507478";
      fjs.parentNode.insertBefore(js, fjs);
    }(document, 'script', 'facebook-jssdk'));
  </script>

  <script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.0/MathJax.js?config=TeX-AMS-MML_HTMLorMML" type="text/javascript"></script>
</html>
